@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens as CSS variables (RGB triplets for alpha support) */
:root {
  /* Base colors */
  --color-bg: 255 255 255;        
  --color-fg: 17 24 39;           
  --color-primary: 30 64 175;     
  --color-accent: 234 88 12;      
  --color-tertiary: 99 157 165;   
  --error-background: 255 255 255;
  --error-text: 255 0 0;
  --dark: 0 0 0;
  
  --color-error-fg: 185 28 28;
  --color-error-bg: 254 226 226;

  --color-info-fg: 29 78 216;
  --color-info-bg: 219 234 254;

  --color-success-fg: 21 128 61;
  --color-success-bg: 220 252 231;

  --color-warning-fg: 194 65 12;
  --color-warning-bg: 255 237 213;

  --color-read-bg: 255 253 251;
  --color-read-fg: 0 0 0;

  /* Images */
  --home-bg-image: none;
  --home-bg-size: auto;
}

:root[data-season="autumn"] {
  --color-bg: 247 234 223;        // Blanc cass√©
  --color-primary: 201 129 41;    // Brun
  --color-accent: 164 52 92;      // Fuschia
  --color-tertiary: 99 157 165;   // Bleu / vert
  --dark: 65 37 10; 
  /* Public web root is /, so image path should not include /public */
  --home-bg-image: url('/images/themes/autumn/background.png');
}

/* Rich content defaults (for sanitized HTML display) */
.rich-content {
  line-height: 1.6;
}
.rich-content ul {
  list-style: disc;
  margin-left: 1.25rem; /* ~20px */
  padding-left: 0.25rem;
}
.rich-content ol {
  list-style: decimal;
  margin-left: 1.25rem;
  padding-left: 0.25rem;
}
.rich-content li {
  margin: 0.25rem 0;
}

/* Quill alignment classes on read-only pages (no .ql-editor wrapper) */
.ql-align-left { text-align: left; }
.ql-align-center { text-align: center; }
.ql-align-right { text-align: right; }
.ql-align-justify { text-align: justify; }

[x-cloak] { display: none !important; }

/* Component layer: semantic, reusable patterns */
@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center rounded-md bg-primary text-white px-4 py-2 font-medium hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/40 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-accent {
    @apply inline-flex items-center justify-center rounded-md bg-accent text-white px-4 py-2 font-medium hover:bg-accent/90 focus:outline-none focus:ring-2 focus:ring-accent/40 disabled:opacity-50 disabled:cursor-not-allowed;
  }
}

/* Utility layer: one-off helpers, escape hatches */
@layer utilities {
  .bg-seasonal {
    background-image: var(--home-bg-image);
    background-repeat: repeat;
    background-position: top left;
    background-size: var(--home-bg-size);
  }

  /* Surface system: season-agnostic light/dark panels */
  .surface-secondary {
    /* Set surface background/foreground tokens for children */
    --surface-bg: var(--dark);
    --surface-fg: 255 255 255;
    --surface-error-bg: 218 59 57; 
    /* Hint to browser for built-in UI (inputs, etc.) */
    color-scheme: dark;
    /* Apply colors */
    background-color: rgb(var(--dark) / 0.9);
    /* Do NOT set text color here; use .text-on-surface opt-in on text elements */
  }

  .surface-primary {
    --surface-bg: var(--color-primary);
    --surface-fg: 255 255 255;
    --surface-border: var(--color-primary);
    color-scheme: light;
    background-color: rgb(var(--color-primary));
    /* Do NOT set text color here; use .text-on-surface opt-in on text elements */

    &:hover {
      background-color: rgb(var(--color-primary) / 0.9);
    }

    &.selected, .selected {
      background-color: rgb(var(--surface-fg));
      color: rgb(var(--surface-bg));
    }
  }

  .surface-accent {
    --surface-bg: var(--color-accent);
    --surface-fg: 255 255 255;
    --surface-border: var(--color-accent);
    color-scheme: light;
    background-color: rgb(var(--color-accent));
  }

  .surface-tertiary {
    --surface-bg: var(--color-tertiary);
    --surface-fg: 255 255 255;
    --surface-border: var(--color-tertiary);
    color-scheme: light;
    background-color: rgb(var(--color-tertiary));
  }

  .surface-neutral {
    --surface-bg: transparent;
    --surface-fg: var(--color-fg);
    --surface-border: var(--color-fg);
    color-scheme: light;
    background-color: transparent;
  }

  .surface-error {
    --surface-bg: var(--color-error-bg);
    --surface-fg: var(--color-error-fg);
    --surface-border: var(--color-error-bg);
    color-scheme: light;
    background-color: rgb(var(--color-error-bg));
  }

  .surface-info {
    --surface-bg: var(--color-info-bg);
    --surface-fg: var(--color-info-fg);
    --surface-border: var(--color-info-bg);
    color-scheme: light;
    background-color: rgb(var(--color-info-bg));
  }

  .surface-success {
    --surface-bg: var(--color-success-bg);
    --surface-fg: var(--color-success-fg);
    --surface-border: var(--color-success-bg);
    color-scheme: light;
    background-color: rgb(var(--color-success-bg));
  }

  .surface-warning {
    --surface-bg: var(--color-warning-bg);
    --surface-fg: var(--color-warning-fg);
    --surface-border: var(--color-warning-bg);
    color-scheme: light;
    background-color: rgb(var(--color-warning-bg));
  }

  .surface-read {
    --surface-bg: var(--color-read-bg);
    --surface-fg: var(--color-read-fg);
    --surface-border: transparent;
    color-scheme: light;
    background-color: rgb(var(--color-read-bg));
  }

  .text-on-surface {
    color: rgb(var(--surface-fg));
  }

  .border-surface {
    border: 1px solid rgb(var(--surface-border));
  }

  .error-on-surface {
    color: rgb(var(--surface-fg));
    background-color: rgb(var(--surface-error-bg));
  }
}
